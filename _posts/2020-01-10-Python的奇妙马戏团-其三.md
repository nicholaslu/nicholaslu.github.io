---
layout: post
title: "Python的奇妙马戏团-其三"
date: 2020-01-10 23:16:18
tags: Python
mathjax: true
---

# 找事情干

当然，只是在屏幕输出"Hello world!"并不是我们所期望的事情，因为这样的事情看上去并没有那么有趣。我们想要做的，是一些有趣的，最好是人类不想去做的事情，这样才显示出编程的优越性。比如说计算从1加到100的值。

下面介绍一下变量的概念。在计算机中，变量意味着一个可以变化的量，不同的变量可能会存有不同的数据类型，比如数字、列表、字符串。我们在第一次给这个变量赋值的时候会确定这个变量的类型，之后就不会再改变了。在赋值时，我们使用等号`=`。例如

```python
a=3
```

这样，我们就在创建数字变量`a`的同时，给它赋予了3的数值。虽然使用了等号，但这个语句和数学中等号的意义是不一样的，它不代表左右两式相等，而是代表把右边的值赋予给左边。经常，我们会在代码中恰当的地方加入空格，使它看起来更加易读，这并不影响语法的正确性。例如

```python
a = 3
```

因为此时变量`a`中存入了3，所以我们可以通过`print()`函数来输出`a`的值。

```python
a = 3
print(a)
```

此时，程序会输出3这个数字。值得注意的是，`print(a)`和`print("a")`的意义是不一样的，前者输出`a`这个变量的值，后者直接输出a这个字符串。我们还可以再创建一个变量`b`，并把`a`的值赋予它，例如

```python
a = 3
print(a)
b = a
print(b)
```

这样程序就会输出两个3出来。值得注意的是，这样创建出来的b的变量类型和a肯定是一致的，都是数字。

试一下下面的代码会输出什么

```python
a = b = c = 1 + 2 + 3
print(a, b, c)
```

# 开始加起来

知道了赋值语句，那么怎么计算1加到100就不难了，我们只需要把1加到100的公式列出来，并赋值给一个变量就可以了，也就是

```python
s = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 + 11 + 12 + 13 + 14 + 15 + 16 + 17 + 18 + 19 + 20 + 21 + 22 + 23 + 24 + 25 + 26 + 27 + 28 + 29 + 30 + 31 + 32 + 33 + 34 + 35 + 36 + 37 + 38 + 39 + 40 + 41 + 42 + 43 + 44 + 45 + 46 + 47 + 48 + 49 + 50 + 51 + 52 + 53 + 54 + 55 + 56 + 57 + 58 + 59 + 60 + 61 + 62 + 63 + 64 + 65 + 66 + 67 + 68 + 69 + 70 + 71 + 72 + 73 + 74 + 75 + 76 + 77 + 78 + 79 + 80 + 81 + 82 + 83 + 84 + 85 + 86 + 87 + 88 + 89 + 90 + 91 + 92 + 93 + 94 + 95 + 96 + 97 + 98 + 99 + 100
print(s)
```

我们欣喜的发现，这和我们笔算的结果5050是一样的。现在我们这么快就掌握了如何用Python来计算1到100的和。

# 向高斯求助

但是你也许会疑惑，这和我想象中的编程好像不一样呀。是的，如果我们翻一翻小学课本，会发现高斯并不是这么求和的。他发现了第n项和第101-n项的和总是为101的规律，而得到了一个简便的公式。如果我们应用这个结论，便可以得到下面这个简便的程序。

```python
start = 1
end = 100
answer = (start + end)*(end - start + 1) / 2
```

在Python中，我们可以直接使用加减乘除进行计算，但由于键盘上并没有乘除的符号，所以使用`*`和`/`来进行替代。所以上式等于
$$
answer=\frac{\left(start+end\right)\times\left(end-start+1\right)}{2}
$$
我们可以在程序中更改`start`和`end`的值，来计算不同的公式。比如计算1000到10000的和。

```python
start = 1000
end = 10000
answer = (start + end)*(end - start + 1) / 2
print(answer)
```

# 唔...有没有，更通用一点的？

ちょいまち！难道我每次算一个东西都要拜托高斯来算出一个公式吗？这明显不可能，因为高斯已经死了。计算机有一个好的特性就是他非常善于做**简单而重复**的事情，因此真的做99次加法也完全没有怨言。因此，我们就要导入一个重要的结构，循环结构。

上面所使用的结构，都是顺序结构，也就是程序一行一行从上往下按顺序执行。但总有时候我们要反复执行部分代码，比如10000次，这个时候总不能把这部分Ctrl+C、Ctrl+V9999次吧。使用循环结构能有效解决这个问题。Python中主要的循环结构分为`while`和`for`。下面通过例子来了解它们。

```python
age = 0
while age < 100:
    print("Alice is", age, "years old.")
    age = age + 1
```

程序共有四行。第一行给`age`赋予了一个0的值。剩下的这三行都属于`while`语句，`while`语句的首行由`while`和判断执行的条件组成。此处条件为`age < 100`，也就是`age`变量是否小于100，当小于时，执行循环剩下的那两行；当不小于时，结束这个循环。当第一次判断时，`age`的值为0，是满足这个条件的，之后百年输出了一次年龄，并给`age`加1。务必注意的是，`age = age + 1`这个语句的含义，是将`age`的值加1，再赋予`age`，有时候你能看到`age += 1`这种更奇怪的写法，这里我并不推荐。在第二次判断时，age的值便已经变成2了，但仍然符合条件。如此反复，当age加到了100的时候，它便不再符合这个条件，因为100并不小于100。于是循环结束，最后一次输出的那行应该是*Alice is 99 years old.*。

值得注意的是，条件后面的冒号`:`，和接下来的缩进。冒号代表着接下来是循环内要执行的内容，而缩进的那些行代表着这些行是这个循环结构的一部分。你可以用四个空格，或一个制表符TAB来制造缩进。这些语法务必遵守，否则会使程序无法正常运行。

我们还可以在while后面加上一个`else`语句，这代表着在不满足条件的时候，会将`else`执行一次，然后结束循环。例如

```python
age = 0
while age < 100:
    print("Alice is", age, "years old.")
    age = age + 1
else:
    print("Now she is dead.")
```

 当我们把最后一句`age = age + 1`去掉并运行，会发生什么呢？程序一直在输出*Alice is 0 years old.*而不停止。这是因为循环的条件是永远满足的，从而无法从循环中结束，也就是程序陷入了死循环。因此，在使用循环语句时，应当认真思考循环结束的条件是否总是能满足。好了，让我们来继续求和吧。

```python
s = 0
i = 1
while i <= 100:
	s = s + i
	i = i + 1
print(s)
```

哦，完美地得到了结果。只要简单的修改一下程序，我可以得到1乘到100的结果。

```python
s = 1.0
i = 1
while i <= 100:
	s = s * i
	i = i + 1
print(s)
```

求积时，`s`的初始值需要修改为1，否则无论乘多少次`s`都将会是0。但为什么是1.0而不是1呢。请过一段时间再思考。

可以简单地把这段代码用`for`语句重写：

```python
s = 0
for i in range(1,101):
	s = s + i
print(s)
```

`for`语句将一个变量，此处为i，按顺序在一个列表中取一个值，再执行之后的语句们。在取完所有的值后，循环结束。上面提到的冒号和缩进的规则，此处依然适用，并依然可以添加`else`语句。`range(1,101)`的目的是生成一个从1到101为止的列表，此处到101为止的意思是，101是取不到的，因此这个序列的第一个元素是1，最后一个元素是100。

```python
print(list(range(5, 10)))
```

输出的是`[5, 6, 7, 8, 9]`，`list()`的作用是列举列表的元素。一个列表可以包含字符串，字符串应该由引号（单引号和双引号皆可）包括起来。列表中的元素使用方括号`[]`包含起来，并用逗号`,`隔开。例如

```python
list1 = ['I',"get up", 'at', 8, ":00", 'PM.']
print(list1)
print(list(list1))

list2 = [2,4,7,2,0,0]
print(list2)
print(list(list2))

list3 = range(1,10,2)
print(list3)
print(list(list3))
```

此处的`range(1,10,2)`较以前使用的多出了一个参数2，这个2代表步长，即间隔。`range(1,10,2)`产生了一个从1开始，以2为间隔，到10为止的一个列表。

第一个列表中是由五个字符串和一个数字构成的。可以使用`for`循环来输出一个列表中的所有元素，例如

```python
list1 = ['I',"get up", 'at', 8, ":00", 'PM.']

for i in list1:
    print(i)
```

# 附注

如果思考的话，会发现循环结构中的`else`语句**貌似**并没有作用，因为无论如何`else`语句中的代码都会执行一遍，那么等循环结构结束后再去执行的话，得到的结果是一样的。

```python
age = 0
while age < 100:
    print("Alice is", age, "years old.")
    age = age + 1
else:
    print("Now she is dead.")
```

```python
age = 0
while age < 100:
    print("Alice is", age, "years old.")
    age = age + 1
print("Now she is dead.")
```

但是其实循环语句中还有一个`break`语句，它的作用是跳出这个循环。那么在`while`循环包含`break`语句时，只有在`break`语句没有被触发的时候，`else`语句才会被执行。

```python
even_list = [0, 2, -4, 8, 2020]
for i in even_list:
    if i % 2 != 0: break
else:
    print("Pass!")
```

```python
even_list = [0, 2, -4, 9, 2020]
for i in even_list:
    if i % 2 != 0: break
else:
    print("Pass!")
```

# 闲话

[开始加起来](#开始加起来)中的代码，当然不是我人工敲的，实际上，它可以用循环语句来实现

```python
s = "s = "
for i in range(1,100):
    s = s + str(i) + " + "
s = s + "100" + "\nprint(s)"
print(s)
```

